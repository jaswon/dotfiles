#!/bin/bash

case $1 in
  +) amixer -q set Master 10%+ unmute ;;
  -) amixer -q set Master 10%- unmute ;;
  %) amixer -q set Master toggle ;;
esac

# draw bar to noti
amixer sget Master | tail -n1 | sed 's/^.*\[\(.*\)%\] \[.*\] \[\(.*\)\]$/\1 \2/' | {
	read vol mute
	case $mute in
		"on") icon=$(echo -e "\ue204") ;;
		"off") icon=$(echo -e "\ue202") ;;
	esac
	vol=$(( (vol + 5) / 10 ))
	volbar=$(yes '-' | head -n$vol | tr -d "\n")
	padbar=$(yes ' ' | head -n$(( 10 - vol )) | tr -d "\n")
	noti "[$icon$volbar$padbar ]"
}
